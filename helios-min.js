(function(Z,r){var ae=typeof exports=="object"&&exports&&(typeof global=="object"&&global&&global==global.global&&(Z=global),exports);var g=Object.prototype.toString,U=Array.prototype,ac=U.push,M=U.pop,w=U.slice,H=U.shift,x=U.indexOf,F=U.concat,k,o={},I={},S={},ai={},W={vertices:{},edges:{},v_idx:{},e_idx:{}},u=["label","id","value","stringify","count","map","clone","path","fork","pin"];Function.prototype.pipe=function(){var e=this;return function(){var E=[],v=!I.include(["as","back","loop","countBy","groupBy","groupSum","store"],e.name);this.traversedVertices={};this.traversedEdges={};ac.call(E,this.pipedObjects);ac.apply(E,arguments);if(v){this.pipeline.steps[this.pipeline.steps.currentStep+=1]={pipedInArgs:E,func:e,pipedOutArgs:[]}}this.pipedObjects=e.apply(this,E);if(v&&this.pipeline.steps.currentStep!==0){ac.call(this.pipeline.steps[this.pipeline.steps.currentStep].pipedOutArgs,this.pipedObjects)}return this}};function l(){var v,e=this;for(v in e){if(typeof e[v]==="function"&&!I.include(u,v)){e[v]=e[v].pipe()}}return e}function q(){this.traversedVertices={};this.traversedEdges={};this.pipeline={};this.pipedObjects=[];this.preserveSteps=false;ai.resetPipe.call(this);return l.call(this)}q.toString=function(){return"Helios"};q.VERSION="0.0.1";q.ENV={id:"_id",label:"_label",type:"_type",outEid:"_outE",inEid:"_inE",outVid:"_outV",inVid:"_inV"};q.newGraph=function(ak,E){var e=false,v,V;if(ai.isString(ak)){v=ak.split(".").pop();e=v.toLowerCase()==="json"}if(!!ak&&(ak.hasOwnProperty("vertices")||ak.hasOwnProperty("edges"))){e=true}if((!!ak&&!ai.isString(ak)&&!e)||!!E){if(!E){E=ak;ak=false}for(V in E){if(E.hasOwnProperty(V)){q.ENV[V]=E[V]}}}if(!!ak&&e){o.loadGraphSON(ak)}if(!!ak&&!e){o.loadGraphML(ak)}return new q()};o.loadGraphSON=function(an){var ak,E,ao=[],al={},v={},e,am=!ai.isEmpty(W.v_idx),V=!ai.isEmpty(W.e_idx);k=q.ENV;if(ai.isUndefined(an)){return}if(ai.isString(an)){e=new XMLHttpRequest();e.onreadystatechange=function(){if(e.readyState===4){an=JSON.parse(e.response)}};e.open("GET",an,false);e.send(null)}if(an.vertices){ao=an.vertices;E=ao.length;for(ak=0;ak<E;ak+=1){W.vertices[ao[ak][k.id]]={obj:ao[ak],type:"vertex",outE:{},inE:{}};al=W.vertices[ao[ak][k.id]];if(am){ai.addVIndex(al)}}}if(an.edges){ao=an.edges;E=ao.length;if(!!k.eIndicies.length){I.each(k.eIndicies,function(ap){if(!W.e_idx[ap]){W.e_idx[ap]={}}})}for(ak=0;ak<E;ak+=1){v={obj:ao[ak],type:"edge",outV:{},inV:{}};W.edges[v.obj[k.id]]=v;ai.associateVertices(v);if(V){ai.addEIndex(v)}}}return q};o.loadGraphML=function(e){var ap,an,al,ao,E=[],av=[],aq={},ak={},ax,V,v,aw,at,au={},ar=!ai.isEmpty(W.v_idx),am=!ai.isEmpty(W.e_idx);k=q.ENV;if(ai.isUndefined(e)){return}if(ai.isString(e)){ax=e.split(".").pop();if(ax.toLowerCase()==="xml"){V=new XMLHttpRequest();V.onreadystatechange=function(){if(V.readyState===4){aw=V.responseXML}};V.open("GET",e,false);V.send(null)}else{if(Z.DOMParser){v=new DOMParser();aw=v.parseFromString(e,"text/xml")}else{aw=new ActiveXObject("Microsoft.XMLDOM");aw.async=false;aw.loadXML(e)}}}E=aw.getElementsByTagName("node");av=aw.getElementsByTagName("edge");if(!!E.length){al=E.length;for(ap=0;ap<al;ap+=1){at=E[ap].getElementsByTagName("data");au={};ao=at.length;for(an=0;an<ao;an+=1){au[at[an].getAttribute("key")]=at[an].firstChild.nodeValue}au[k.id]=E[ap].getAttribute("id");au[k.type]="vertex";W.vertices[E[ap].getAttribute("id")]={obj:au,type:"vertex",outE:{},inE:{}};aq=W.vertices[E[ap].getAttribute("id")];if(ar){ai.addVIndex(aq)}}}if(!!av.length){al=av.length;for(ap=0;ap<al;ap+=1){at=av[ap].getElementsByTagName("data");au={};ao=at.length;for(an=0;an<ao;an+=1){au[at[an].getAttribute("key")]=at[an].firstChild.nodeValue}au[k.id]=av[ap].getAttribute("id");au[k.type]="edge";au[k.label]=av[ap].getAttribute("label");au[k.outVid]=av[ap].getAttribute("source");au[k.inVid]=av[ap].getAttribute("target");W.edges[av[ap].getAttribute("id")]={obj:au,type:"edge",outV:{},inV:{}};ak=W.edges[av[ap].getAttribute("id")];ai.associateVertices(ak);if(am){ai.addEIndex(ak)}}}return q};o.createVIndex=function(v){var e=[];if(!W.v_idx[v]){e=ai.toArray(W.vertices);W.v_idx[v]={};I.each(e,function(E){ai.addVIndex(E,v)})}};o.deleteVIndex=function(e){delete W.v_idx[e]};o.createEIndex=function(v){var e=[];if(!W.e_idx[v]){e=ai.toArray(W.edges);W.e_idx[v]={};I.each(e,function(E){ai.addEIndex(E,v)})}};o.deleteEIndex=function(e){delete W.e_idx[e]};ai.addVIndex=function(E,v){var e;if(v){if(!!E.obj[v]){if(!W.v_idx[v][E.obj[v]]){W.v_idx[v][E.obj[v]]={}}W.v_idx[v][E.obj[v]][E.obj[k.id]]=E}}else{for(e in W.v_idx){if(W.v_idx.hasOwnProperty(e)){if(!!E.obj[e]){if(!W.v_idx[e][E.obj[e]]){W.v_idx[e][E.obj[e]]={}}W.v_idx[e][E.obj[e]][E.obj[k.id]]=E}}}}};ai.addEIndex=function(E,v){var e;if(v){if(!!E.obj[v]){if(!W.e_idx[v][E.obj[v]]){W.e_idx[v][E.obj[v]]={}}W.e_idx[v][E.obj[v]][E.obj[k.id]]=E}}else{for(e in W.e_idx){if(W.e_idx.hasOwnProperty(e)){if(!!E.obj[e]){if(!W.e_idx[e][E.obj[e]]){W.e_idx[e][E.obj[e]]={}}W.e_idx[e][E.obj[e]][E.obj[k.id]]=E}}}}};ai.associateVertices=function(e){var v;if(!W.vertices[e.obj[k.outVid]]){W.vertices[e.obj[k.outVid]]={obj:{},type:"vertex",outE:{},inE:{}}}v=W.vertices[e.obj[k.outVid]];if(!v.outE[e.obj[k.label]]){v.outE[e.obj[k.label]]=[]}e.outV=v;ac.call(v.outE[e.obj[k.label]],e);if(!W.vertices[e.obj[k.inVid]]){W.vertices[e.obj[k.inVid]]={obj:{},type:"vertex",outE:{},inE:{}}}v=W.vertices[e.obj[k.inVid]];if(!v.inE[e.obj[k.label]]){v.inE[e.obj[k.label]]=[]}v=W.vertices[e.obj[k.inVid]];e.inV=v;ac.call(v.inE[e.obj[k.label]],e)};o.close=function(){W={vertices:{},edges:{},v_idx:{},e_idx:{}};return q};ai.resetPipe=function(){if(!this.preserveSteps){this.pipeline={steps:{currentStep:0},namedStep:{}}}if(!ai.isEmpty(this.pipelineCache)){this.pipeline.steps["1"]={};this.pipeline.steps["1"].pipedInArgs=[];this.pipeline.steps["1"].func=this.pipelineCache.func;this.pipeline.steps["1"].pipedOutArgs=this.pipelineCache.pipedOutArgs;this.pipeline.steps.currentStep=1;this.pipedObjects=this.pipelineCache.pipedOutArgs[0]}};ai.toArray=function(E){var e,v=[];for(e in E){if(E.hasOwnProperty(e)){v.push(E[e])}}return v};ai.isArray=function(e){return g.call(e)==="[object Array]"};ai.isString=function(e){return g.call(e)==="[object String]"};ai.isNumber=function(e){return g.call(e)==="[object Number]"};ai.isDate=function(e){return g.call(e)==="[object Date]"};ai.isEmpty=function(v){var e;if(!v){return true}for(e in v){if(v.hasOwnProperty(e)){return !v[e]}}return true};ai.isFunction=function(e){return g.call(e)==="[object Function]"};ai.isNull=function(e){return g.call(e)==="[object Null]"};ai.isUndefined=function(e){return g.call(e)==="[object Undefined]"};I.intersection=function(V,v,E){var al=[],am={},ak,e;for(ak=0;ak<v.length;ak+=1){if(!!E){am[v[ak].obj[k.id]]=true}else{am[v[ak]]=true}}for(ak=0;ak<V.length;ak+=1){e=!!E?V[ak].obj[k.id]:V[ak];if(!!am[e]){al.push(V[ak])}}return al};I.difference=function(V,v,E){var al=[],am={},ak,e;for(ak=0;ak<v.length;ak+=1){if(!!E){am[v[ak].obj[k.id]]=true}else{am[v[ak]]=true}}for(ak=0;ak<V.length;ak+=1){e=!!E?V[ak].obj[k.id]:V[ak];if(!am[e]){al.push(V[ak])}}return al};I.unique=function(ak){var V={},v,e=ak.length,E=[];for(v=0;v<e;v+=1){V[ak[v]]=ak[v]}for(v in V){if(V.hasOwnProperty(v)){E.push(V[v])}}return E};I.uniqueObject=function(ak){var V={},v,e=ak.length,E=[];for(v=0;v<e;v+=1){V[ak[v].obj[k.id]]=ak[v]}for(v in V){if(V.hasOwnProperty(v)){E.push(V[v])}}return E};I.countBy=function(am,e,ao){var v=arguments[0],ak,V,E=am.length,al={},an;if(!ao){ao=e;e={};v=e}an=ao.length;for(ak=0;ak<E;ak+=1){al=am[ak].obj;for(V=0;V<an;V+=1){if(!e[ao[V]]){e[ao[V]]=1}else{e[ao[V]]+=1}}}return v};I.sumBy=function(am,e,ao){var v=arguments[0],ak,V,E=am.length,al={},an;if(!ao){ao=e;e={};v=e}an=ao.length;for(ak=0;ak<E;ak+=1){al=am[ak].obj;for(V=0;V<an;V+=1){if(!e[ao[V]]){e[ao[V]]=al[ao[V]]}else{e[ao[V]]+=al[ao[V]]}}}return v};function i(){var e=I.uniqueObject(arguments[0]);return e}I.groupBy=function(am,e,ap){var v=arguments[0],al,V,an=i(am),E=an.length,ak={},ao,aq;if(!ap){ap=e;e={};v=e}ao=ap.length;for(al=0;al<E;al+=1){ak=an[al].obj;aq=e;for(V=0;V<ao;V+=1){if(V===ao-1){if(!aq[ak[ap[V]]]){aq[ak[ap[V]]]=[ak]}else{ac.call(aq[ak[ap[V]]],ak)}}else{if(!aq[ak[ap[V]]]){aq[ak[ap[V]]]={}}}aq=aq[ak[ap[V]]]}}return v};I.groupCount=function(am,e,ap){var v=arguments[0],al,V,an=i(am),E=an.length,ak={},ao,aq;if(!ap){ap=e;e={};v=e}ao=ap.length;for(al=0;al<E;al+=1){ak=an[al].obj;aq=e;for(V=0;V<ao;V+=1){if(V===ao-1){if(!aq[ak[ap[V]]]){aq[ak[ap[V]]]=[ak]}else{ac.call(aq[ak[ap[V]]],ak)}}else{if(!aq[ak[ap[V]]]){aq[ak[ap[V]]]={}}}aq=aq[ak[ap[V]]];if(!aq.count){aq.count=1}else{aq.count+=1}}}return v};I.clone=function(e){return JSON.parse(JSON.stringify(e))};I.include=function(v,e){return x.call(v,e)===-1?false:true};I.keys=function(E){var e,v=[];for(e in E){if(E.hasOwnProperty(e)){v.push(e)}}return v};I.values=function(e){return ai.toArray(e)};I.pick=function(V){var ak,E=F.apply(U,arguments),v=E.length,e={};while(v){v-=1;ak=E[v];if(V.hasOwnProperty(ak)){e[ak]=V[ak]}}return e};I.getObjProp=function(V){var E,v=V.length,e=[];for(E=0;E<v;E+=1){ac.call(e,V[E].obj)}return e};I.flatten=function(al,ak){var e=[],V,v=-1,E;if(!al){return e}E=al.length;while((v+=1)<E){V=al[v];if(ai.isArray(V)){ac.apply(e,ak?V:I.flatten(V))}else{e.push(V)}}return e};I.map=function(al,E){var v,e=al.length,ak,V=[];for(v=0;v<e;v+=1){ak=al[v];V.push(E.call(null,ak))}return V};I.filter=function(al,E){var v,e=al.length,ak,V=[];for(v=0;v<e;v+=1){ak=al[v];if(E.call(null,ak)){V.push(ak)}}return V};I.each=function(al,E){var v,e=al.length,ak,V=[];for(v=0;v<e;v+=1){ak=al[v];E.call(null,ak)}};function j(){var v=[],e=arguments;if(!!this.pipedObjects[0]&&!!this.pipedObjects[0].obj){v=I.getObjProp(this.pipedObjects)}else{v=this.pipedObjects}ai.resetPipe.call(this);return v}function T(){var e={};e=new q();e.pipedObjects=this.pipedObjects;ai.resetPipe.call(e);e.pipeline.steps["1"]={};e.pipeline.steps["1"].pipedInArgs=this.pipeline.steps[this.pipeline.steps.currentStep].pipedInArgs;e.pipeline.steps["1"].func=this.pipeline.steps[this.pipeline.steps.currentStep].func;e.pipeline.steps["1"].pipedOutArgs=this.pipeline.steps[this.pipeline.steps.currentStep].pipedOutArgs;e.pipeline.steps.currentStep=1;e.preserveSteps=true;ai.resetPipe.call(this);return e}function L(){var e={};e=new q();e.pipedObjects=this.pipedObjects;e.pipelineCache={};e.pipelineCache.pipedOutArgs=this.pipeline.steps[this.pipeline.steps.currentStep].pipedOutArgs;e.pipelineCache.func=this.pipeline.steps[this.pipeline.steps.currentStep].func;ai.resetPipe.call(this);ai.resetPipe.call(e);return e}function G(){var v=[],E=[],e=arguments;if(!!e.length){v=I.map(this.pipedObjects,function(V){E=[V.obj];ac.apply(E,e);return I.pick.apply(this,E)})}ai.resetPipe();return v}function aj(){var v=[],e=arguments;if(!!this.pipedObjects[0]&&!!this.pipedObjects[0].obj){return JSON.stringify(G.apply(this,e))}v=this.pipedObjects;ai.resetPipe();return JSON.stringify(v)}function aa(){var v=[],an,ao=this.pipeline.steps,e={},E,ap,ak,V,am,al;for(ak=1;ak<=ao.currentStep;ak+=1){am=ao[ak].pipedOutArgs[0];an=e["step "+ak]=[];for(V=0,al=am.length;V<al;V+=1){if(am[V].type==="vertex"){ac.call(an,"v["+am[V].obj[k.id]+"]")}else{E=am[V].obj;ap="v["+E[k.outVid]+"], e["+E[k.id]+"]["+E[k.outVid]+"-"+E[k.label]+"->"+E[k.inVid]+"], v["+E[k.inVid]+"]";ac.call(an,ap)}}}ac.call(v,JSON.stringify(e));ac.apply(v,this.pipedObjects);ai.resetPipe();return v}function Y(){var E=[],e=I.flatten(w.call(arguments,1)),v=e.length;while(v){v-=1;ac.call(E,W.vertices[e[v]])}return E}function af(){var E=[],v,e=I.flatten(w.call(arguments,1));v=e.length;while(v){v-=1;ac.call(E,W.edges[e[v]])}return E}function R(){var e=[];e=I.map(this.pipedObjects,function(E,v,V){return E.obj[k.id]});ai.resetPipe();return e}function ad(){var e=[];e=I.map(this.pipedObjects,function(E,v,V){return E.obj[k.label]});ai.resetPipe();return e}function X(){var E=[],e=w.call(arguments,1),V=!!e.length,v;I.each(arguments[0],function(am,ak,al){if(!ai.isEmpty(am.outE)){v=V?I.pick(am.outE,e):am.outE;I.each(I.flatten(I.values(v)),function(an){ac.call(E,an.inV)})}});return E}function n(){var e=I.map(arguments[0],function(E,v,V){return E.outV});return e}function K(){var E=[],e=w.call(arguments,1),V=!!e.length,v;I.each(arguments[0],function(am,ak,al){if(!ai.isEmpty(am.inE)){v=V?I.pick(am.inE,e):am.inE;I.each(I.flatten(I.values(v)),function(an){ac.call(E,an.outV)})}});return E}function b(){var e=I.map(arguments[0],function(E,v,V){return E.inV});return e}function A(){var E=[],e=w.call(arguments,1),V=!!e.length,v;I.each(arguments[0],function(am,ak,al){if(!ai.isEmpty(am.outE)){v=V?I.pick(am.outE,e):am.outE;I.each(I.flatten(I.values(v)),function(an){ac.call(E,an.inV)})}if(!ai.isEmpty(am.inE)){v=V?I.pick(am.inE,e):am.inE;I.each(I.flatten(I.values(v)),function(an){ac.call(E,an.outV)})}});return E}function D(){var e=[];I.each(arguments[0],function(E,v,V){ac.call(e,E.inV);ac.call(e,E.outV)});return e}function B(){var E=[],e=w.call(arguments,1),V=!!e.length,v;I.each(arguments[0],function(am,ak,al){if(!ai.isEmpty(am.outE)){v=V?I.pick(am.outE,e):am.outE;I.each(I.flatten(I.values(v)),function(an){ac.call(E,an)})}});return E}function m(){var E=[],e=w.call(arguments,1),V=!!e.length,v;I.each(arguments[0],function(am,ak,al){if(!ai.isEmpty(am.inE)){v=V?I.pick(am.inE,e):am.inE;I.each(I.flatten(I.values(v)),function(an){ac.call(E,an)})}});return E}function P(){var E=[],e=w.call(arguments,1),V=!!e.length,v;I.each(arguments[0],function(am,ak,al){if(!ai.isEmpty(am.outE)){v=V?I.pick(am.outE,e):am.outE;I.each(I.flatten(I.values(v)),function(an){ac.call(E,an)})}if(!ai.isEmpty(am.inE)){v=V?I.pick(am.inE,e):am.inE;I.each(I.flatten(I.values(v)),function(an){ac.call(E,an)})}});return E}function d(){var e=w.call(arguments,1);if(e.length===2){return ai.toArray(W.v_idx[e[0]][e[1]])}return ai.toArray(W.vertices)}function p(){var e=w.call(arguments,1);if(e.length===2){return ai.toArray(W.e_idx[e[0]][e[1]])}return ai.toArray(W.edges)}function ah(){var al=[],E=[],V=[],v=w.call(arguments,1),am=!!v.length,ak,e=this;I.each(arguments[0],function(an){if(!e.traversedVertices[an.obj[k.id]]){e.traversedVertices[an.obj[k.id]]="visited";ak=am?I.pick(an.outE,v):an.outE;if(ai.isEmpty(ak)){if(am){if(!ai.isEmpty(I.pick(an.inE,v))){ac.call(al,an)}}else{ac.call(al,an)}}else{E=[];V=[];I.each(I.flatten(I.values(ak)),function(ao){if(!e.traversedEdges[ao.obj[k.id]]){ac.call(E,ao.inV);e.traversedEdges[ao.obj[k.id]]="visited"}});ac.call(V,E);ac.apply(V,v);ac.apply(al,ah.apply(e,V))}}});return al}function s(){var al=[],E=[],V=[],v=w.call(arguments,1),am=!!v.length,ak,e=this;I.each(arguments[0],function(an){if(!e.traversedVertices[an.obj[k.id]]){e.traversedVertices[an.obj[k.id]]="visited";ak=am?I.pick(an.inE,v):an.inE;if(ai.isEmpty(ak)){if(am){if(!ai.isEmpty(I.pick(an.outE,v))){ac.call(al,an)}}else{ac.call(al,an)}}else{E=[];V=[];I.each(I.flatten(I.values(ak)),function(ao){if(!e.traversedEdges[ao.obj[k.id]]){ac.call(E,ao.outV);e.traversedEdges[ao.obj[k.id]]="visited"}});ac.call(V,E);ac.apply(V,v);ac.apply(al,s.apply(e,V))}}});return al}function a(){var V=arguments[0],e=w.call(arguments,1),v,E=[];if(!!e.length){if(ai.isArray(e[0])){ac.apply(e[0],arguments[0])}else{this.pipeline.namedStep[e[0]]=this.pipeline.steps.currentStep}if(ai.isFunction(e[1])){v=e[1];e.shift();E=I.flatten(w.call(e,1));V=v.apply(arguments[0],E)}}return V}function J(){var e=arguments[1],v;if(ai.isArray(e)){return e}if(ai.isString(e)){if(ai.isUndefined(this.pipeline.namedStep[e])){return}v=this.pipeline.namedStep[e]}else{v=this.pipeline.steps.currentStep-e}return this.pipeline.steps[v].pipedOutArgs[0]}function C(){var e=arguments[1],v,V,E=[];v=ai.isArray(e)?e:this.pipeline.steps[this.pipeline.namedStep[e]].pipedOutArgs[0];E=I.difference(arguments[0],v,true);return E}function O(){var al=[],v=arguments[0],E=w.call(arguments,1),V,ak=[],e=E.length;if(ai.isFunction(E[0])){V=E[0];ak=I.flatten(w.call(E,1),true);I.each(v,function(am){if(V.apply(am.obj,ak)){ac.call(al,am)}})}else{while(e){e-=2;al=I.filter(v,S[E[e]](E[e+1]))}}this.pipeline.namedStep.filter=this.pipeline.steps.currentStep;return al}function f(){var v=[],ap=arguments[0],ao=w.call(arguments,1),ak=this.pipeline.steps[this.pipeline.namedStep.filter].pipedInArgs[0],V,E=[],an,al,am,e=[];if(ai.isFunction(ao[0])){V=ao[0];E=I.flatten(w.call(ao,1),true);I.each(ak,function(aq){if(V.apply(aq.obj,E)){ac.call(v,aq)}})}else{an=ao.length;while(an){an-=2;v=I.filter(ak,S[ao[an]](ao[an+1]))}}am=v.length;for(al=0;al<am;al+=1){ac.call(e,v[al].obj[k.id])}e=I.unique(e);am=ap.length;for(al=0;al<am;al+=1){if(!I.include(e,ap[al].obj[k.id])){ac.call(v,ap[al])}}return v}function h(){var e=arguments[1],v,V,E=[];v=ai.isArray(e)?e:this.pipeline.steps[this.pipeline.namedStep[e]].pipedOutArgs[0];E=I.intersection(arguments[0],v,true);return E}function N(){var ak=[],v=[],e=w.call(arguments,1),E,V=[];if(ai.isFunction(e[0])){E=e[0];V=I.flatten(w.call(e,1),true);ak=E.apply(arguments[0],V)}else{ak="Invalid function"}return ak}function ab(){var e=this.pipedObjects.length;ai.resetPipe.call(this);return e}function z(){var e=I.flatten(w.call(arguments,1)),v=e[0],E;if(ai.isString(e[0])){v=w.call(e)}else{E=w.call(e,1)}return I.countBy(arguments[0],v,E)}function Q(){var e=I.flatten(w.call(arguments,1)),v=e[0],E;if(ai.isString(e[0])){v=w.call(e)}else{E=w.call(e,1)}return I.sumBy(arguments[0],v,E)}function ag(){var e=I.flatten(w.call(arguments,1)),v=e[0],E;if(ai.isString(e[0])){v=w.call(e)}else{E=w.call(e,1)}return I.groupBy(arguments[0],v,E)}function t(){var e=I.flatten(w.call(arguments,1)),v=e[0],E;if(ai.isString(e[0])){v=w.call(e)}else{E=w.call(e,1)}return I.groupCount(arguments[0],v,E)}function c(){var v=arguments[1],al=arguments[2]-1,E,ak,an,am,V,e=this;if(ai.isString(v)){v=e.pipeline.steps.currentStep+1-e.pipeline.namedStep[v]}while(al--){am=e.pipeline.steps.currentStep+1-v;V=e.pipeline.steps.currentStep;for(E=am;E<=V;E+=1){ak=e.pipeline.steps[E].func;an=ak.name==="_in"?"in":ak.name;this[an].apply(e,w.call(e.pipeline.steps[E].pipedInArgs,1))}}return e.pipeline.steps[e.pipeline.steps.currentStep].pipedOutArgs[0]}function y(){return JSON.parse(aj())}S.eq=function(e){return function(v){var E=e.length;while(E){E-=2;if(v.obj[e[E]]===e[E+1]){return true}}return false}};S.neq=function(e){return function(v){var E=e.length;while(E){E-=2;if(v.obj[e[E]]!==e[E+1]){return true}}return false}};S.lt=function(e){return function(v){var E=e.length;while(E){E-=2;if(v.obj[e[E]]<e[E+1]){return true}}return false}};S.lte=function(e){return function(v){var E=e.length;while(E){E-=2;if(v.obj[e[E]]<=e[E+1]){return true}}return false}};S.gt=function(e){return function(v){var E=e.length;while(E){E-=2;if(v.obj[e[E]]>e[E+1]){return true}}return false}};S.gte=function(e){return function(v){var E=e.length;while(E){E-=2;if(v.obj[e[E]]>=e[E+1]){return true}}return false}};S.btwn=function(e){return function(v){var E=e.length;while(E){E-=3;if(v.obj[e[E]]>e[E+1]&&v.obj[e[E]]<e[E+2]){return true}}return false}};S.has=function(e){return function(v){var E=w.call(e,1);return I.intersection(I[e[0]](v.obj),E).length===E.length}};S.hasNot=function(e){return function(v){var E=w.call(e,1);return I.intersection(I[e[0]](v.obj),E).length!==E.length}};S.hasAny=function(e){return function(v){return !!I.intersection(I[e[0]](v.obj),w.call(e,1)).length}};S.hasNotAny=function(e){return function(v){return !I.intersection(I[e[0]](v.obj),w.call(e,1)).length}};q.prototype.step=N;q.prototype.transform=N;q.prototype.map=G;q.prototype.id=R;q.prototype.label=ad;q.prototype.V=d;q.prototype.E=p;q.prototype.out=X;q.prototype["in"]=K;q.prototype.outV=n;q.prototype.outE=B;q.prototype.inV=b;q.prototype.inE=m;q.prototype.both=A;q.prototype.bothV=D;q.prototype.bothE=P;q.prototype.head=s;q.prototype.tail=ah;q.prototype.path=aa;q.prototype.stringify=aj;q.prototype.value=j;q.prototype.fork=T;q.prototype.pin=L;q.prototype.filter=O;q.prototype.andFilter=O;q.prototype.orFilter=f;q.prototype.back=J;q.prototype.except=C;q.prototype.retain=h;q.prototype.dedup=i;q.prototype.sideEffect=N;q.prototype.as=a;q.prototype.store=a;q.prototype.countBy=z;q.prototype.groupBy=ag;q.prototype.groupCount=t;q.prototype.groupSum=Q;q.prototype.count=ab;q.prototype.loop=c;q.prototype.v=Y;q.prototype.e=af;q.prototype.graph=o;q.prototype.clone=y;if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){Z.Helios=q;define(function(){return q})}else{if(ae){if(typeof module=="object"&&module&&module.exports==ae){(module.exports=q).Helios=q}else{ae.Helios=q}}else{Z.Helios=q}}}(this));